<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NeonArcade ‚Äì ‡§ñ‡•á‡§≤‡•ã ‡§î‡§∞ ‡§ú‡•Ä‡§§‡•ã‡§Ç!</title>
  <meta name="description" content="‡§è‡§ï ‡§¶‡§Æ‡§¶‡§æ‡§∞, ‡§è‡§ï‡§≤‚Äë‡§´‡§æ‡§á‡§≤ ‡§ó‡•á‡§Æ‡§ø‡§Ç‡§ó ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü‚ÄîSnake, Tic‚ÄëTac‚ÄëToe, ‡§î‡§∞ Memory ‡§ú‡•à‡§∏‡•á ‡§Æ‡§ø‡§®‡•Ä‚Äë‡§ó‡•á‡§Æ‡•ç‡§∏ ‡§ï‡•á ‡§∏‡§æ‡§•‡•§ ‡§π‡§æ‡§à‚Äë‡§∏‡•ç‡§ï‡•ã‡§∞, ‡§•‡•Ä‡§Æ ‡§ü‡•â‡§ó‡§≤, ‡§î‡§∞ ‡§ë‡§´‡§≤‡§æ‡§á‡§®‚Äë‡§´‡•ç‡§∞‡•á‡§Ç‡§°‡§≤‡•Ä ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®." />
  <style>
    :root{
      --bg:#0b0f1a; --panel:#0f1424; --text:#e6eeff; --muted:#96a0b7;
      --brand:#7c4dff; --brand2:#00e5ff; --danger:#ff5252; --success:#00e676; --warn:#ffd740;
      --card:#121935; --glass:rgba(255,255,255,.06); --border:rgba(255,255,255,.12);
      --shadow:0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px var(--border);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans",sans-serif;background:radial-gradient(1200px 600px at 10% 0%,rgba(124,77,255,.25),transparent 60%),radial-gradient(900px 500px at 90% 10%,rgba(0,229,255,.12),transparent 60%),var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:auto;padding:24px}
    header{
      position:sticky;top:0;z-index:50;background:linear-gradient(180deg,var(--bg),rgba(11,15,26,.7));backdrop-filter:blur(8px);border-bottom:1px solid var(--border)
    }
    .nav{display:flex;align-items:center;gap:12px;justify-content:space-between;padding:16px 24px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .logo{width:34px;height:34px;border-radius:12px;background:conic-gradient(from 180deg at 50% 50%, var(--brand), var(--brand2), var(--brand));box-shadow:0 0 30px rgba(124,77,255,.35)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);background:var(--glass);padding:10px 14px;border-radius:14px;color:var(--text);cursor:pointer;transition:.2s ease;box-shadow:var(--shadow)}
    .btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.2)}
    .btn.primary{background:linear-gradient(90deg,rgba(124,77,255,.25),rgba(0,229,255,.18));border-color:rgba(124,77,255,.5)}

    .hero{padding:56px 24px 24px;display:grid;grid-template-columns:1.15fr .85fr;gap:24px;align-items:center}
    .hero .card{padding:28px;border-radius:20px;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));box-shadow:var(--shadow)}
    .title{font-size:clamp(28px,4.2vw,46px);line-height:1.1;margin:0 0 8px}
    .subtitle{color:var(--muted);margin:0 0 16px}
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0 18px}
    .badge{font-size:.85rem;padding:6px 10px;border-radius:20px;border:1px solid var(--border);background:var(--glass)}
    .glow{filter:drop-shadow(0 0 18px rgba(124,77,255,.45))}

    .games{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin:26px 0}
    @media (max-width:900px){.hero{grid-template-columns:1fr}.games{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:620px){.games{grid-template-columns:1fr}}

    .game-card{position:relative;overflow:hidden;border-radius:20px;background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);display:flex;flex-direction:column}
    .game-thumb{height:160px;background:linear-gradient(120deg,rgba(124,77,255,.25),transparent),radial-gradient(400px 160px at 80% 20%,rgba(0,229,255,.18),transparent 60%),linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02))}
    .game-body{padding:16px}
    .game-title{font-weight:700;margin:0 0 6px}
    .muted{color:var(--muted)}

    .panel{padding:16px;border:1px solid var(--border);border-radius:16px;background:var(--glass);box-shadow:var(--shadow)}

    /* Modal */
    .overlay{position:fixed;inset:0;background:rgba(6,8,14,.6);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:100}
    .overlay.show{display:flex}
    .modal{width:min(920px,96vw);max-height:92vh;overflow:auto;border-radius:22px;background:var(--panel);border:1px solid var(--border);box-shadow:var(--shadow);padding:18px}
    .modal-head{display:flex;align-items:center;justify-content:space-between;gap:10px;border-bottom:1px solid var(--border);padding-bottom:10px;margin-bottom:12px}
    .modal-title{font-weight:800}
    .modal-body{padding:8px}

    /* Game areas */
    .center{display:flex;align-items:center;justify-content:center}
    canvas{background:#060913;border-radius:12px;border:1px solid var(--border)}

    /* TicTacToe */
    .ttt{display:grid;grid-template-columns:repeat(3,110px);gap:10px;justify-content:center}
    .cell{width:110px;height:110px;display:flex;align-items:center;justify-content:center;font-size:48px;font-weight:900;border-radius:14px;background:rgba(255,255,255,.03);border:1px solid var(--border);cursor:pointer;user-select:none}
    .cell.win{outline:2px solid var(--success);box-shadow:0 0 25px rgba(0,230,118,.25)}

    /* Memory */
    .memory{display:grid;grid-template-columns:repeat(4,90px);gap:10px;justify-content:center}
    .card{width:90px;height:110px;perspective:800px}
    .card-inner{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .35s}
    .card.flip .card-inner{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;border-radius:12px;display:flex;align-items:center;justify-content:center;border:1px solid var(--border);backface-visibility:hidden}
    .front{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03))}
    .back{transform:rotateY(180deg);background:linear-gradient(135deg, rgba(124,77,255,.2), rgba(0,229,255,.2))}

    footer{padding:24px;border-top:1px solid var(--border);color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <header>
    <nav class="nav container">
      <div class="brand"><span class="logo"></span> <span>NeonArcade</span></div>
      <div style="display:flex;gap:10px;align-items:center">
        <button id="openLeaderboard" class="btn">üèÜ ‡§≤‡•Ä‡§°‡§∞‡§¨‡•ã‡§∞‡•ç‡§°</button>
        <button id="themeBtn" class="btn">üåô ‡§•‡•Ä‡§Æ</button>
        <a class="btn primary" href="#games">üéÆ ‡§ñ‡•á‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</a>
      </div>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <div class="card">
        <h1 class="title glow">‡§∏‡§¨‡§∏‡•á ‡§Ö‡§≤‡§ó, ‡§§‡•á‡§ú‡§º ‡§î‡§∞ ‡§Æ‡§ú‡§º‡•á‡§¶‡§æ‡§∞ <span style="color:var(--brand2)">Arcade</span>!</h1>
        <p class="subtitle">‡§è‡§ï ‡§π‡•Ä ‡§™‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§ï‡§à ‡§Æ‡§ø‡§®‡•Ä‚Äë‡§ó‡•á‡§Æ‡•ç‡§∏‡•§ ‡§ï‡•ã‡§à ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§®‡§π‡•Ä‡§Ç‚Äî‡§ñ‡•ã‡§≤‡•ã ‡§î‡§∞ ‡§ñ‡•á‡§≤‡•ã‡•§ ‡§π‡§æ‡§à‚Äë‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§∏‡•á‡§µ, ‡§§‡•á‡§ú‡§º ‡§™‡§∞‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§Ç‡§∏, ‡§î‡§∞ ‡§®‡•Ä‡§Ø‡•â‡§®‚Äë‡§ó‡•ç‡§≤‡•ã ‡§≤‡•Å‡§ï‡•§</p>
        <div class="badges">
          <span class="badge">‚ö° Ultra‚ÄëLight</span>
          <span class="badge">üß† ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü CPU</span>
          <span class="badge">üíæ Local High‚ÄëScores</span>
          <span class="badge">üì± 100% Responsive</span>
        </div>
        <div style="display:flex;gap:10px">
          <a class="btn primary" href="#games">‡§Ö‡§≠‡•Ä ‡§ñ‡•á‡§≤‡•á‡§Ç</a>
          <button class="btn" id="howBtn">‡§ï‡•à‡§∏‡•á ‡§ö‡§≤‡§æ‡§è‡§Å?</button>
        </div>
      </div>
      <div class="panel">
        <h3 style="margin:0 0 8px">‚öôÔ∏è ‡§π‡§æ‡§á‡§≤‡§æ‡§á‡§ü‡•ç‡§∏</h3>
        <ul style="margin:0 0 6px 18px;line-height:1.5">
          <li>‡§è‡§ï‡§≤‚Äë‡§´‡§æ‡§á‡§≤ ‡§∏‡§æ‡§á‡§ü (index.html) ‚Äî ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§ë‡§´‡§≤‡§æ‡§á‡§® ‡§ö‡§≤‡•á‡§ó‡•Ä‡•§</li>
          <li>Snake (‡§ï‡•à‡§®‡§µ‡§æ‡§∏), Tic‚ÄëTac‚ÄëToe (‡§Æ‡§æ‡§®‡§µ ‡§¨‡§®‡§æ‡§Æ CPU), Memory Match (4√ó4)‡•§</li>
          <li>‡§≤‡•Ä‡§°‡§∞‡§¨‡•ã‡§∞‡•ç‡§°: ‡§π‡§æ‡§à‚Äë‡§∏‡•ç‡§ï‡•ã‡§∞/‡§¨‡•á‡§∏‡•ç‡§ü ‡§ü‡§æ‡§á‡§Æ ‡§≤‡•ã‡§ï‡§≤Storage ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§</li>
          <li>‡§•‡•Ä‡§Æ ‡§ü‡•â‡§ó‡§≤ ‡§î‡§∞ ‡§Ø‡•Ç‡§®‡§ø‡§ï ‡§®‡•Ä‡§Ø‡•â‡§®‚Äë‡§ó‡•ç‡§≤‡•ã ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§®‡•§</li>
        </ul>
        <small class="muted">‡§ü‡§ø‡§™: ‡§´‡§æ‡§á‡§≤ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§ï‡•á ‡§°‡§¨‡§≤‚Äë‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ‚Äî Chrome/Edge/Brave ‡§Æ‡•á‡§Ç ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ö‡§≤‡•á‡§ó‡•Ä‡•§</small>
      </div>
    </section>

    <h2 id="games" style="margin:10px 0 8px">üéØ ‡§ó‡•á‡§Æ‡•ç‡§∏</h2>
    <div class="games">
      <article class="game-card">
        <div class="game-thumb"></div>
        <div class="game-body">
          <h3 class="game-title">Snake</h3>
          <p class="muted">‡§ñ‡§æ‡§ì, ‡§¨‡§¢‡§º‡•ã, ‡§¶‡•Ä‡§µ‡§æ‡§∞ ‡§î‡§∞ ‡§ñ‡•Å‡§¶ ‡§∏‡•á ‡§¨‡§ö‡•ã‡•§ ‡§π‡§æ‡§à‚Äë‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§¨‡§®‡§æ‡§ì!</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn primary" data-open="snake">Play Snake</button>
            <button class="btn" data-open="snake-info">‡§®‡§ø‡§Ø‡§Æ</button>
          </div>
        </div>
      </article>
      <article class="game-card">
        <div class="game-thumb"></div>
        <div class="game-body">
          <h3 class="game-title">Tic‚ÄëTac‚ÄëToe</h3>
          <p class="muted">‡§Ü‡§™ ‡§¨‡§®‡§æ‡§Æ CPU ‚Äî ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§á‡§∏‡•á ‡§π‡§∞‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç?</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn primary" data-open="ttt">Play TTT</button>
            <button class="btn" data-open="ttt-info">‡§®‡§ø‡§Ø‡§Æ</button>
          </div>
        </div>
      </article>
      <article class="game-card">
        <div class="game-thumb"></div>
        <div class="game-body">
          <h3 class="game-title">Memory Match</h3>
          <p class="muted">‡§ú‡•ã‡§°‡§º‡•Ä ‡§¢‡•Ç‡§Å‡§¢‡•ã‚Äî‡§ï‡§Æ ‡§ö‡§æ‡§≤‡•á‡§Ç, ‡§ï‡§Æ ‡§∏‡§Æ‡§Ø, ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§∏‡•ç‡§ï‡•ã‡§∞‡•§</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn primary" data-open="memory">Play Memory</button>
            <button class="btn" data-open="memory-info">‡§®‡§ø‡§Ø‡§Æ</button>
          </div>
        </div>
      </article>
    </div>

    <section class="panel" id="how">
      <h3 style="margin:0 0 6px">üõ†Ô∏è ‡§ö‡§≤‡§æ‡§®‡•á ‡§ï‡§æ ‡§Ü‡§∏‡§æ‡§® ‡§§‡§∞‡•Ä‡§ï‡§æ</h3>
      <ol style="margin:0 0 0 18px;line-height:1.6">
        <li>‡§ä‡§™‡§∞ ‡§ï‡•Ä ‡§´‡§æ‡§á‡§≤ ‡§ï‡•ã <strong>index.html</strong> ‡§®‡§æ‡§Æ ‡§∏‡•á ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§</li>
        <li>Windows 10 ‡§Æ‡•á‡§Ç ‡§´‡§æ‡§á‡§≤ ‡§™‡§∞ ‡§°‡§¨‡§≤‚Äë‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ‚Äî ‡§Ü‡§™‡§ï‡§æ ‡§°‡§ø‡§´‡•â‡§≤‡•ç‡§ü ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ñ‡•Å‡§≤‡•á‡§ó‡§æ‡•§</li>
        <li>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§™‡§∞ ‡§≠‡•Ä ‡§ö‡§≤ ‡§ú‡§æ‡§è‡§ó‡§æ: ‡§´‡§æ‡§á‡§≤ ‡§ï‡•ã ‡§´‡•ã‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§ï‡•á ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§∏‡•á ‡§ñ‡•ã‡§≤‡•á‡§Ç‡•§</li>
      </ol>
    </section>
  </main>

  <footer>
    ¬© <span id="yr"></span> NeonArcade ‚Ä¢ Built for fun.
  </footer>

  <!-- Overlay/Modal -->
  <div class="overlay" id="overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Modal</div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn" id="saveScoreBtn" title="‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç">üíæ ‡§∏‡•á‡§µ</button>
          <button class="btn" id="closeModal">‚úñ ‡§¨‡§Ç‡§¶</button>
        </div>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
  const $ = s=>document.querySelector(s);
  const $$ = s=>Array.from(document.querySelectorAll(s));
  const overlay = $('#overlay');
  const modalTitle = $('#modalTitle');
  const modalBody = $('#modalBody');
  const saveBtn = $('#saveScoreBtn');
  const yrEl = $('#yr'); yrEl.textContent = new Date().getFullYear();

  const state = {
    currentGame: null,
    lastScore: null,
  };

  const storage = {
    get(k, d){ try{ return JSON.parse(localStorage.getItem(k)) ?? d }catch(e){return d}},
    set(k, v){ localStorage.setItem(k, JSON.stringify(v)) },
  };

  // Theme toggle
  const themeBtn = $('#themeBtn');
  themeBtn.addEventListener('click', ()=>{
    document.body.classList.toggle('light');
    if(document.body.classList.contains('light')){
      document.documentElement.style.setProperty('--bg','#fbfbfe');
      document.documentElement.style.setProperty('--panel','#ffffff');
      document.documentElement.style.setProperty('--text','#0a0d18');
      document.documentElement.style.setProperty('--muted','#495265');
      document.documentElement.style.setProperty('--card','#f2f4ff');
    }else{
      document.location.reload(); // quick reset to default vars
    }
  });

  // Generic modal helpers
  function openModal(title, content, gameKey=null){
    modalTitle.textContent = title;
    modalBody.innerHTML = '';
    if(typeof content === 'string') modalBody.innerHTML = content; else modalBody.append(content);
    overlay.classList.add('show');
    state.currentGame = gameKey;
    state.lastScore = null;
    saveBtn.style.display = gameKey ? 'inline-flex' : 'none';
  }
  $('#closeModal').addEventListener('click', ()=> overlay.classList.remove('show'));
  overlay.addEventListener('click', e=>{ if(e.target===overlay) overlay.classList.remove('show') });

  // Leaderboard View
  $('#openLeaderboard').addEventListener('click', ()=>{
    const board = storage.get('neonarcade.board', {snake:0, ttt:{wins:0}, memory:{bestTime:null, bestMoves:null}});
    const wrap = document.createElement('div');
    wrap.innerHTML = `
      <div class="panel">
        <h3 style="margin:0 0 8px">üèÜ ‡§≤‡•Ä‡§°‡§∞‡§¨‡•ã‡§∞‡•ç‡§°</h3>
        <ul style="margin:0 0 0 18px;line-height:1.7">
          <li>Snake ‡§π‡§æ‡§à‚Äë‡§∏‡•ç‡§ï‡•ã‡§∞: <strong>${board.snake||0}</strong></li>
          <li>TTT ‡§ú‡•Ä‡§§ (CPU ‡§ï‡•á ‡§ñ‡§ø‡§≤‡§æ‡§´): <strong>${(board.ttt&&board.ttt.wins)||0}</strong></li>
          <li>Memory ‡§¨‡•á‡§∏‡•ç‡§ü ‡§ü‡§æ‡§á‡§Æ: <strong>${board.memory?.bestTime? board.memory.bestTime+'s' : '‚Äî'}</strong>, ‡§¨‡•á‡§∏‡•ç‡§ü ‡§Æ‡•Ç‡§µ‡•ç‡§∏: <strong>${board.memory?.bestMoves ?? '‚Äî'}</strong></li>
        </ul>
      </div>`;
    openModal('‡§≤‡•Ä‡§°‡§∞‡§¨‡•ã‡§∞‡•ç‡§°', wrap);
  });

  // How to run
  $('#howBtn').addEventListener('click', ()=>{
    openModal('‡§ï‡•à‡§∏‡•á ‡§ö‡§≤‡§æ‡§è‡§Å?', `<div class="panel"><ol style="margin:0 0 0 18px;line-height:1.7"><li>‡§ä‡§™‡§∞ ‡§ï‡•á ‡§™‡•Ç‡§∞‡•á ‡§ï‡•ã‡§° ‡§ï‡•ã ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§ï‡•á <b>index.html</b> ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç‡•§</li><li>‡§°‡§¨‡§≤‚Äë‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§ï‡•á ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§ñ‡•ã‡§≤‡•á‡§Ç‡•§</li><li>‡§Ö‡§ó‡§∞ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§§‡•ã ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§π‡•ã‡§∏‡•ç‡§ü‡§ø‡§Ç‡§ó (Netlify, GitHub Pages) ‡§™‡§∞ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç‡•§</li></ol></div>`);
  });

  // Save score
  saveBtn.addEventListener('click', ()=>{
    if(!state.currentGame) return;
    const board = storage.get('neonarcade.board', {snake:0, ttt:{wins:0}, memory:{bestTime:null, bestMoves:null}});
    if(state.currentGame==='snake'){
      if(typeof state.lastScore === 'number' && state.lastScore > (board.snake||0)) board.snake = state.lastScore;
    }
    if(state.currentGame==='ttt'){
      if(state.lastScore==='win'){ board.ttt = {wins: (board.ttt?.wins||0)+1}; }
    }
    if(state.currentGame==='memory'){
      const {time, moves} = state.lastScore||{};
      if(time!=null && (board.memory.bestTime==null || time<board.memory.bestTime)) board.memory.bestTime=time;
      if(moves!=null && (board.memory.bestMoves==null || moves<board.memory.bestMoves)) board.memory.bestMoves=moves;
    }
    storage.set('neonarcade.board', board);
    alert('‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ!');
  });

  // Attach card buttons
  $$('[data-open]')?.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const key = btn.getAttribute('data-open');
      if(key==='snake') startSnake();
      if(key==='ttt') startTTT();
      if(key==='memory') startMemory();
      if(key==='snake-info') openModal('Snake ‡§®‡§ø‡§Ø‡§Æ', `<div class="panel"><ul style="margin:0 0 0 18px;line-height:1.7"><li>‡§è‡§∞‡•ã keys ‡§∏‡•á ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§</li><li>‡§ñ‡§æ‡§®‡§æ ‡§ñ‡§æ‡§è‡§Å, ‡§≤‡§Ç‡§¨‡§æ‡§à ‡§¨‡§¢‡§º‡§æ‡§è‡§Å‡•§</li><li>‡§¶‡•Ä‡§µ‡§æ‡§∞ ‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§¨‡•â‡§°‡•Ä ‡§∏‡•á ‡§ü‡§ï‡§∞‡§æ‡§è‡§Å‡§ó‡•á ‡§§‡•ã ‡§ó‡•á‡§Æ ‡§ì‡§µ‡§∞‡•§</li></ul></div>`);
      if(key==='ttt-info') openModal('Tic‚ÄëTac‚ÄëToe ‡§®‡§ø‡§Ø‡§Æ', `<div class="panel"><ul style="margin:0 0 0 18px;line-height:1.7"><li>3√ó3 ‡§ó‡•ç‡§∞‡§ø‡§° ‡§Æ‡•á‡§Ç X/O ‡§≤‡§ó‡§æ‡§è‡§Å‡•§</li><li>CPU ‡§Æ‡§ø‡§®‡•Ä‚Äë‡§Æ‡•à‡§ï‡•ç‡§∏ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§Æ‡•Ç‡§µ‡•ç‡§∏ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§</li><li>‡§™‡§π‡§≤‡•á ‡§§‡•Ä‡§® ‡§è‡§ï ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç = ‡§ú‡•Ä‡§§!</li></ul></div>`);
      if(key==='memory-info') openModal('Memory ‡§®‡§ø‡§Ø‡§Æ', `<div class="panel"><ul style="margin:0 0 0 18px;line-height:1.7"><li>‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡§≤‡§ü‡•á‡§Ç ‡§î‡§∞ ‡§ú‡•ã‡§°‡§º‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§è‡§Å‡•§</li><li>‡§ï‡§Æ ‡§ö‡§æ‡§≤‡•á‡§Ç ‡§î‡§∞ ‡§ï‡§Æ ‡§∏‡§Æ‡§Ø ‡§¨‡•á‡§π‡§§‡§∞ ‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§π‡•à‡•§</li></ul></div>`);
    });
  });

  // ===== SNAKE =====
  function startSnake(){
    const wrap = document.createElement('div');
    wrap.innerHTML = `<div style="display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:8px"><div>‡§∏‡•ç‡§ï‡•ã‡§∞: <b id="snScore">0</b> ‚Ä¢ ‡§π‡§æ‡§à: <b id="snHigh">${storage.get('neonarcade.board',{snake:0}).snake||0}</b></div><div><button class="btn" id="snReset">üîÑ ‡§∞‡•Ä‚Äë‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü</button></div></div>`;
    const cv = document.createElement('canvas'); cv.width=420; cv.height=420; wrap.appendChild(cv);
    openModal('Snake', wrap, 'snake');

    const ctx = cv.getContext('2d');
    const grid=20; let vx=1, vy=0; let snake=[{x:10,y:10}]; let food=spawn(); let score=0; let speed=120; let dead=false; let tickId;
    function spawn(){ return {x: Math.floor(Math.random()* (cv.width/grid)), y: Math.floor(Math.random()* (cv.height/grid))} }

    function drawRect(x,y,c){ ctx.fillStyle=c; ctx.fillRect(x*grid+1,y*grid+1,grid-2,grid-2) }

    function loop(){
      tickId = setTimeout(()=>{ requestAnimationFrame(loop) }, speed);
      if(dead) return;
      // move
      const head = {x: snake[0].x + vx, y: snake[0].y + vy};
      // wrap around walls for more fun (or comment for hard walls)
      head.x = (head.x + (cv.width/grid)) % (cv.width/grid);
      head.y = (head.y + (cv.height/grid)) % (cv.height/grid);
      // collision with body
      if(snake.some((s,i)=> i>0 && s.x===head.x && s.y===head.y)) { gameOver(); return }
      snake.unshift(head);
      // eat
      if(head.x===food.x && head.y===food.y){ score++; $('#snScore').textContent=score; food=spawn(); speed = Math.max(60, speed-3); }
      else snake.pop();
      // draw
      ctx.clearRect(0,0,cv.width,cv.height);
      // grid glow
      for(let y=0;y<cv.height/grid;y++) for(let x=0;x<cv.width/grid;x++){
        ctx.fillStyle = (x+y)%2? 'rgba(124,77,255,.08)' : 'rgba(0,229,255,.06)';
        ctx.fillRect(x*grid,y*grid,grid,grid);
      }
      snake.forEach((s,i)=> drawRect(s.x,s.y, i? 'rgba(255,255,255,.9)' : '#7c4dff'));
      drawRect(food.x, food.y, '#00e5ff');
    }

    function gameOver(){ dead=true; state.lastScore=score; clearTimeout(tickId); alert('‡§ó‡•á‡§Æ ‡§ì‡§µ‡§∞! ‡§∏‡•ç‡§ï‡•ã‡§∞: '+score) }

    document.addEventListener('keydown', handleKey);
    function handleKey(e){
      if(e.key==='ArrowLeft' && vx!==1){vx=-1;vy=0}
      if(e.key==='ArrowRight' && vx!==-1){vx=1;vy=0}
      if(e.key==='ArrowUp' && vy!==1){vx=0;vy=-1}
      if(e.key==='ArrowDown' && vy!==-1){vx=0;vy=1}
    }
    $('#snReset').onclick=()=>{ clearTimeout(tickId); vx=1;vy=0;snake=[{x:10,y:10}];food=spawn();score=0;speed=120;dead=false;$('#snScore').textContent=0; loop(); };

    loop();
  }

  // ===== TIC TAC TOE (with simple minimax) =====
  function startTTT(){
    const wrap = document.createElement('div');
    const info = document.createElement('div'); info.style.margin='0 0 10px';
    info.innerHTML = '‡§Ü‡§™: <b>X</b> ‚Ä¢ CPU: <b>O</b> ‚Äî ‡§™‡§π‡§≤‡•á ‡§§‡•Ä‡§® ‡§è‡§ï ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç!';
    const boardEl = document.createElement('div'); boardEl.className='ttt';
    const ctrl = document.createElement('div'); ctrl.style.margin='10px 0';
    ctrl.innerHTML = '<button class="btn" id="tttReset">üîÑ ‡§®‡§à ‡§ó‡•á‡§Æ</button>';
    wrap.append(info, boardEl, ctrl);
    openModal('Tic‚ÄëTac‚ÄëToe (CPU)', wrap, 'ttt');

    let board = Array(9).fill(null); let player='X'; let over=false;

    function render(){
      boardEl.innerHTML='';
      board.forEach((v,i)=>{
        const c=document.createElement('div'); c.className='cell'; c.textContent=v||''; c.addEventListener('click',()=>move(i)); boardEl.appendChild(c);
      });
    }
    function move(i){ if(over||board[i])return; board[i]=player; player='O'; check(); cpu(); }
    function cpu(){ if(over) return; const i = bestMove(board); if(i!=null){ board[i]='O'; player='X'; check(); render(); } else render(); }

    function lines(){ return [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]] }
    function winner(b){ for(const [a,c,d] of lines()){ if(b[a]&&b[a]===b[c]&&b[a]===b[d]) return b[a]; } return b.every(Boolean)?'draw':null }

    function check(){
      const w = winner(board);
      if(w){ over=true; highlight();
        if(w==='X'){ state.lastScore='win'; alert('‡§Ü‡§™ ‡§ú‡•Ä‡§§ ‡§ó‡§è!'); }
        else if(w==='O'){ state.lastScore='lose'; alert('CPU ‡§ú‡•Ä‡§§ ‡§ó‡§Ø‡§æ!'); }
        else { state.lastScore='draw'; alert('‡§Æ‡•à‡§ö ‡§°‡•ç‡§∞‡•â!'); }
      }
    }
    function highlight(){
      const wline = lines().find(([a,c,d])=> board[a]&&board[a]===board[c]&&board[a]===board[d]);
      if(!wline) return; $$('.cell').forEach((el,idx)=>{ if(wline.includes(idx)) el.classList.add('win') });
    }

    function bestMove(b){
      // minimax (depth‚Äëlimited for speed)
      let best=-Infinity, moveIdx=null;
      for(let i=0;i<9;i++) if(!b[i]){ b[i]='O'; let val = miniMax(b,false,0); b[i]=null; if(val>best){best=val;moveIdx=i} }
      return moveIdx;
    }
    function scoreEval(w,depth){ if(w==='O') return 10-depth; if(w==='X') return depth-10; return 0 }
    function miniMax(b,isMax,depth){
      const w = winner(b); if(w) return scoreEval(w,depth); if(depth>4) return 0; // limit
      if(isMax){
        let best=-Infinity; for(let i=0;i<9;i++) if(!b[i]){ b[i]='O'; best=Math.max(best, miniMax(b,false,depth+1)); b[i]=null }
        return best;
      } else {
        let best=Infinity; for(let i=0;i<9;i++) if(!b[i]){ b[i]='X'; best=Math.min(best, miniMax(b,true,depth+1)); b[i]=null }
        return best;
      }
    }

    $('#tttReset').onclick=()=>{ board=Array(9).fill(null); player='X'; over=false; render(); };
    render();
  }

  // ===== MEMORY MATCH =====
  function startMemory(){
    const wrap=document.createElement('div');
    const stats=document.createElement('div'); stats.style.margin='0 0 8px';
    stats.innerHTML='‡§ö‡§æ‡§≤‡•á‡§Ç: <b id="mmMoves">0</b> ‚Ä¢ ‡§∏‡§Æ‡§Ø: <b id="mmTime">0</b>s';
    const grid=document.createElement('div'); grid.className='memory';
    const ctrl=document.createElement('div'); ctrl.style.margin='10px 0'; ctrl.innerHTML='<button class="btn" id="mmReset">üîÑ ‡§∞‡•Ä‚Äë‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü</button>';
    wrap.append(stats, grid, ctrl);
    openModal('Memory Match (4√ó4)', wrap, 'memory');

    let icons = ['üçé','üçã','üçá','üçâ','üçí','ü•ù','üçå','üçì'];
    let deck = shuffle([...icons,...icons]).map(v=>({v,open:false,done:false}));
    let first=null, second=null, moves=0, time=0, timer=null, donePairs=0;

    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a }

    function render(){
      grid.innerHTML='';
      deck.forEach((card,idx)=>{
        const el=document.createElement('div'); el.className='card'+(card.open||card.done?' flip':'');
        const inner=document.createElement('div'); inner.className='card-inner';
        const front=document.createElement('div'); front.className='face front'; front.textContent='?';
        const back=document.createElement('div'); back.className='face back'; back.textContent=card.v;
        inner.append(front, back); el.append(inner); grid.append(el);
        el.addEventListener('click', ()=> click(idx, el));
      });
      $('#mmMoves').textContent=moves; $('#mmTime').textContent=time;
    }

    function click(i, el){
      if(timer==null){ timer=setInterval(()=>{ time++; $('#mmTime').textContent=time },1000) }
      if(deck[i].done || deck[i].open) return;
      if(second!=null) return; // wait resolution
      deck[i].open=true; render();
      if(first==null){ first=i; return; }
      second=i; moves++; $('#mmMoves').textContent=moves;
      if(deck[first].v===deck[second].v){ deck[first].done=deck[second].done=true; first=second=null; donePairs++; if(donePairs===icons.length) win(); }
      else setTimeout(()=>{ deck[first].open=deck[second].open=false; first=second=null; render(); },700);
    }

    function win(){ clearInterval(timer); state.lastScore={time, moves}; alert(`‡§∂‡§æ‡§®‡§¶‡§æ‡§∞! ‡§∏‡§Æ‡§Ø: ${time}s ‚Ä¢ ‡§ö‡§æ‡§≤‡•á‡§Ç: ${moves}`); }

    $('#mmReset').onclick=()=>{ clearInterval(timer); time=0;moves=0;first=second=null;donePairs=0; deck=shuffle([...icons,...icons]).map(v=>({v,open:false,done:false})); render(); };

    render();
  }

  </script>
</body>
</html>
